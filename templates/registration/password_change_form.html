{% extends "components/base.html" %}
{% block title %}Alteração de senha{% endblock %}
{% load i18n static %}

{% block main %}
<main class="registration--reset-form">
  {% if form.errors %}
  <div class="registration-error callout alert" data-closable>
    {% for field in form %}
    <h5>{{field.errors}}</h5>
    {% endfor %}
    <button class="close-button" aria-label="Dismiss alert" type="button" data-close>
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <script>
    setTimeout(function() { $('.registration-error .close-button').click(); }, 10000);
  </script>
  {% endif %}

  <div class="registration-wrapper">
    <h1 class="registration__title">Altere sua Senha</h1>
    <p class="registration__text">
      Insira sua senha atual e digite uma nova senha desejada nos campos abaixo
    </p>

    <form class="registration__form" action="{% url 'password_change' %}" method="POST">
      {% csrf_token %}

      <div class="form__fieldset">
        <label class="fieldset__label">
          <i class="icon icon-lock"></i>
        </label>
        <input class="fieldset__input" type="password" id="id_old_password" name="old_password" value="{{ form.old_password.value|default_if_none:"" }}" placeholder="Senha Atual" required />
      </div>

      <div class="form__fieldset">
        <label class="fieldset__label">
          <i class="icon icon-lock"></i>
        </label>
        <input class="fieldset__input" type="password" id="id_new_password1" name="new_password1" value="{{ form.new_password1.value|default_if_none:"" }}" placeholder="Nova Senha" required />
      </div>

      <div class="form__fieldset">
        <label class="fieldset__label">
          <i class="icon icon-lock"></i>
        </label>
        <input class="fieldset__input" type="password" id="id_new_password2" name="new_password2" value="{{ form.new_password2.value|default_if_none:"" }}" placeholder="Redigite a Nova Senha" required />
      </div>

      <button class="form__btn">Recuperar senha</button>
    </form>
  </div>
</main>
{% endblock %}
